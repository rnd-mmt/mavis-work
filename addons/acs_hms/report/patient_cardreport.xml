<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <template id="patient_cardreport_document">
        <t t-call="web.basic_layout">
            <t t-set="doc" t-value="doc.with_context({'lang':doc.partner_id.lang})"/>
                <div style="position: relative;">
                    <img style="width: 400px; position: relative; top: 25px; left: -8px;" src="acs_hms/static/src/img/couverture_arovy.png"/>
                </div>
                <p style="page-break-before:always;"></p>
                <div class="page" style="position: relative;">
                    <div style="position: absolute; top:55px; right:-10px;">
                        <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="324.000000px" height="200.000000px" viewBox="0 0 324.000000 200.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,200.000000) scale(0.100000,-0.100000)" fill="#256ab2" stroke="none"><path d="M2980 1320 c-12 -7 -12 -12 -3 -21 15 -15 26 -7 21 15 -2 11 -7 13-18 6z"/> <path d="M3110 1305 c0 -23 2 -24 20 -15 11 6 20 13 20 15 0 2 -9 9 -20 15 -18 9 -20 8 -20 -15z"/><path d="M3176 1187 c-17 -13 -17 -14 8 -30 l26 -17 0 30 c0 33 -7 37 -34 17z"/> <path d="M2910 1175 c0 -9 6 -12 15 -9 8 4 15 7 15 9 0 2 -7 5 -15 9 -9 3 -15 0 -15 -9z"/> <path d="M3100 1045 c0 -40 5 -42 38 -17 l24 18 -26 17 c-34 23 -36 22 -36 -18z"/> <path d="M2977 1058 c-17 -13 -17 -15 -3 -27 20 -17 29 -10 24 19 -3 19 -5 19 -21 8z"/> <path d="M2571 1051 c-10 -6 -10 -10 -1 -16 13 -8 24 -1 19 14 -3 6 -10 7 -18 2z"/> <path d="M2700 1045 c0 -9 5 -15 11 -13 6 2 11 8 11 13 0 5 -5 11 -11 13 -6 2 -11 -4 -11 -13z"/> <path d="M3234 920 c0 -74 1 -105 3 -67 2 37 2 97 0 135 -2 37 -3 6 -3 -68z"/> <path d="M3171 941 l-43 -29 41 -28 c23 -15 44 -25 47 -22 3 3 4 29 2 57 l-3 51 -44 -29z"/> <path d="M2890 910 l0 -49 35 22 c19 12 34 25 35 29 0 3 -16 15 -35 27 l-35 20 0 -49z"/> <path d="M2767 930 l-28 -17 26 -17 c32 -21 37 -17 33 21 l-3 30 -28 -17z"/> <path d="M2490 915 c0 -27 1 -28 24 -19 22 8 20 21 -4 34 -18 9 -20 8 -20 -15z"/> <path d="M2365 910 c3 -5 8 -10 11 -10 2 0 4 5 4 10 0 6 -5 10 -11 10 -5 0 -7 -4 -4 -10z"/> <path d="M2968 815 c-26 -16 -47 -32 -47 -35 -1 -8 91 -62 96 -57 2 3 3 31 1 63 l-3 59 -47 -30z"/> <path d="M3080 780 c0 -38 3 -70 7 -70 12 0 103 62 103 70 0 8 -91 70 -103 70 -4 0 -7 -31 -7 -70z"/> <path d="M2680 780 l0 -60 40 26 c22 15 40 30 40 34 0 4 -18 19 -40 34 l-40 26 0 -60z"/> <path d="M2558 802 c-39 -24 -39 -24 35 -60 4 -2 7 15 7 37 0 45 -3 47 -42 23z"/><path d="M2300 786 c0 -9 5 -16 10 -16 6 0 10 4 10 9 0 6 -4 13 -10 16 -5 3 -10 -1 -10 -9z"/><path d="M2870 650 c0 -44 3 -80 8 -80 4 0 33 18 66 39 l58 39 -60 41 c-34 23 -63 41 -66 41 -4 0 -6 -36 -6 -80z"/> <path d="M3180 705 c-19 -14 -45 -32 -58 -41 l-24 -16 66 -44 c63 -42 66 -46 66 -85 0 -39 -2 -41 -74 -87 l-75 -48 75 -47 c41 -26 74 -54 74 -62 0 -21 -1 -20 -79 30 -38 25 -72 45 -75 45 -3 0 -6 -45 -6 -100 l0 -101 58 37 c31 20 67 44 80 52 20 13 22 13 22 -4 0 -13 -24 -34 -70 -62 -39 -24 -70 -47 -70 -51 0 -8 127 -91 140 -91 10 0 13 589 4 658 -4 23 -9 42 -13 41 -3 0 -22 -11 -41 -24z"/> <path d="M2763 688 c-29 -18 -53 -36 -53 -39 0 -10 101 -71 107 -66 2 3 3 34 1 71 l-3 66 -52 -32z"/> <path d="M2480 650 c0 -27 3 -50 6 -50 11 0 74 41 74 48 0 7 -65 52 -75 52 -3 0 -5 -22 -5 -50z"/> <path d="M2362 669 l-32 -21 32 -22 33 -22 3 23 c2 13 2 32 0 43 -3 19 -4 19 -36 -1z"/> <path d="M2090 644 c0 -8 5 -12 10 -9 6 3 10 10 10 16 0 5 -4 9 -10 9 -5 0 -10 -7 -10 -16z"/> <path d="M2958 564 c-38 -24 -68 -46 -68 -48 0 -4 95 -68 128 -85 l22 -12 0 96 c0 52 -3 95 -7 94 -5 0 -38 -20 -75 -45z"/> <path d="M3070 515 c0 -52 2 -95 5 -95 7 0 145 92 145 97 0 5 -137 93 -144 93 -3 0 -6 -43 -6 -95z"/> <path d="M2670 516 l0 -87 58 37 c31 20 61 40 65 44 9 8 -15 27 -85 69 l-38 23 0 -86z"/> <path d="M2562 555 c-29 -18 -54 -36 -55 -39 -1 -3 23 -21 53 -40 l55 -35 3 34 c2 19 2 52 0 74 l-3 40 -53 -34z"/><path d="M2280 514 l0 -45 33 22 c17 12 33 23 35 25 2 1 -13 11 -33 22 l-35 21 0 -45z"/><path d="M2160 532 l-22 -18 26 -17 26 -17 0 35 c0 41 -1 41 -30 17z"/> <path d="M1750 521 c0 -6 5 -13 10 -16 6 -3 10 1 10 9 0 9 -4 16 -10 16 -5 0 -10 -4 -10 -9z"/> <path d="M1890 514 c0 -8 5 -12 10 -9 6 4 8 11 5 16 -9 14 -15 11 -15 -7z"/> <path d="M2753 432 l-71 -47 71 -48 72 -47 3 50 c2 28 2 70 0 95 l-3 44 -72 -47z"/> <path d="M2870 386 c0 -53 2 -96 5 -96 6 0 145 90 145 95 0 3 -87 59 -137 89 -10 5 -13 -15 -13 -88z"/> <path d="M2470 384 l0 -76 28 17 c15 10 41 28 58 39 l31 21 -59 37 -58 37 0 -75z"/> <path d="M2353 411 l-42 -26 42 -27 42 -27 3 24 c2 14 2 38 0 53 l-3 29 -42 -26z"/> <path d="M2080 385 l0 -36 30 17 c16 10 28 18 27 19 -1 1 -14 9 -29 18 l-28 17 0 -35z"/> <path d="M1948 397 c-15 -12 -15 -14 3 -25 26 -17 29 -15 29 13 0 28 -7 30 -32 12z"/> <path d="M1545 391 c-3 -5 -1 -12 5 -16 5 -3 10 1 10 9 0 18 -6 21 -15 7z"/> <path d="M1680 379 c0 -18 2 -19 15 -9 15 12 12 30 -6 30 -5 0 -9 -10 -9 -21z"/> <path d="M2952 301 c-83 -54 -87 -39 31 -115 l57 -37 0 101 c0 55 -3 100 -7 99 -5 0 -41 -22 -81 -48z"/> <path d="M2670 255 c0 -47 3 -85 7 -85 4 0 35 19 70 41 l64 42 -65 43 c-36 24 -68 44 -71 44 -3 0 -5 -38 -5 -85z"/> <path d="M2553 294 c-29 -19 -53 -38 -53 -42 0 -4 27 -24 60 -45 l60 -37 0 80 c0 44 -3 80 -7 79 -5 0 -32 -16 -60 -35z"/> <path d="M2270 250 c0 -27 2 -50 5 -50 3 0 23 12 45 26 l40 27 -34 23 c-19 13 -40 24 -45 24 -6 0 -11 -22 -11 -50z"/> <path d="M2150 270 c-26 -21 -25 -23 23 -51 15 -9 17 -5 17 31 0 45 -5 48 -40 20z"/> <path d="M1880 249 c0 -28 2 -30 18 -18 9 7 19 15 21 16 6 4 -20 33 -30 33 -5 0 -9 -14 -9 -31z"/> <path d="M1746 261 c-3 -5 1 -14 9 -21 13 -10 15 -9 15 9 0 21 -14 28 -24 12z"/> <path d="M2870 120 l0 -99 74 47 c41 26 75 49 75 52 0 3 -33 26 -74 52 l-75 47 0 -99z"/> <path d="M2755 170 c-33 -22 -60 -43 -60 -49 0 -9 118 -91 130 -91 3 0 5 40 5 90 0 50 -3 90 -7 89 -5 0 -35 -18 -68 -39z"/> <path d="M2470 121 c0 -39 2 -71 5 -71 3 0 23 13 46 29 22 17 46 32 52 34 14 5 -9 25 -65 57 l-38 21 0 -70z"/> <path d="M2358 152 c-21 -13 -38 -28 -38 -32 0 -10 71 -52 77 -47 2 3 3 27 1 54 l-3 50 -37 -25z"/> <path d="M2080 120 l0 -41 31 21 c16 12 29 23 27 24 -2 1 -15 10 -30 19 l-28 17 0 -40z"/> <path d="M1947 136 c-13 -10 -14 -15 -5 -23 33 -25 38 -24 38 6 0 34 -6 37 -33 17z"/> <path d="M1680 120 c0 -19 3 -21 12 -12 9 9 9 15 0 24 -9 9 -12 7 -12 -12z"/> <path d="M2975 50 l-60 -40 63 0 62 0 0 40 c0 22 -1 40 -2 40 -2 0 -30 -18 -63 -40z"/> <path d="M3070 50 l0 -40 62 0 c34 0 59 2 57 4 -8 8 -111 76 -115 76 -2 0 -4 -18 -4 -40z"/> <path d="M2670 40 c0 -29 1 -30 48 -30 44 1 46 2 27 16 -11 9 -32 22 -47 30 -28 14 -28 14 -28 -16z"/> <path d="M2570 35 l-34 -25 42 0 c38 0 42 2 42 25 0 31 -6 31 -50 0z"/> <path d="M2280 26 c0 -10 8 -16 22 -16 12 0 19 1 17 3 -2 1 -12 9 -21 16 -15 12 -18 11 -18 -3z"/> <path d="M2170 20 c-13 -8 -12 -10 3 -10 9 0 17 5 17 10 0 12 -1 12 -20 0z"/> </g></svg>
                    </div>
                    <div style="margin-left:20px; padding-top: 15px;">
                        <h5 style="margin-bottom:0;"><span t-field="doc.name" style="color:#256ab2; font-weight: 800!important;"/></h5>
                        <strong style="color:#256ab2; font-weight: 800!important; margin-bottom:0;">Carte AROVY</strong>
                    </div>
                    <div style="margin-left:20px; width:150px; position: relative;">
                        <div class="underline"></div>
                        <style>.underline:before { content: "."; border-bottom: solid 8px #2D6AB2; color: transparent; width: 20%; position: absolute; height:0; border-radius: 2px;} .underline:after { content: "."; border-bottom: solid 4px #E21117; color: transparent; width: 85%; position: absolute; left:20%; top: 2px; height:0; border-radius: 0 2px 2px 0;}</style>
                    </div>
                    <table border="0" cellpadding="0" cellspacing="0" style="margin: 30px 0 0 0;">
                            <tbody>
                                <tr>
                                    <td align="center" style="color: #ffffff; background-color: #256ab2; width:25px;">ID</td>
                                    <td style="padding-left:5px; font-size:12px;padding-top:0;"><span t-field="doc.code" style="color:#256ab2; font-weight: 800!important; font-family: Arial;"/></td>
                                </tr>
                                <tr>
                                    <td align="center" style="background-color: #256ab2; color:white;">
                                       <i class="fa fa-user" role="img"/>
                                    </td>
                                    <td style="padding-left:5px; font-size:12px;padding-top:0;">
                                        <p style="margin-bottom:0; color:#256ab2; font-weight: 800!important; font-family: Arial;">Né(e) le: <span t-field="doc.birthday"/>  G.S.: <span t-field="doc.blood_group"/></p>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="background-color: #256ab2; color:white;">
                                       <br/> <i class="fa fa-phone" role="img"/>
                                    </td>
                                    <td style="padding-left:5px; padding-top:-10px; min-width:200px;">
                                        <p style="margin-bottom:0;"><span t-field="doc.mobile" style="color:#256ab2; font-size:12px;line-height:10px;"/></p>
                                        <p style="margin-bottom:0;">
                                            <strong  style="color:#256ab2; font-size:12px;font-weight: 800!important; line-height:10px; font-family: Arial;">N° Proches:</strong> <span t-field="doc.preson_contact" style="color:#256ab2; font-size:12px;line-height:10px;"/>
                                        </p>

                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="background-color: #256ab2; color:white;">
                                        <br/><i class="fa fa-map-marker" role="img"/>
                                    </td>
                                    <td style="color:#256ab2; font-size:12px; padding-left:5px; padding-top:-10px;">
                                        <span t-field="doc.street" style="line-height:10px;"/> <span t-field="doc.street2" style="line-height:10px;"/><br/>
                                        <span t-field="doc.city" style="line-height:10px;"/> <span t-field="doc.state_id" style="line-height:10px;"/> <span t-field="doc.zip" style="line-height:10px;"/><br/>
                                        <span t-field="doc.country_id" style="line-height:10px;"/>
                                    </td>
                                </tr>
                            </tbody>
                    </table>
                    <div style="position: absolute; top:200px; left:247px;">
                        <t t-if="doc.code">
                            <img alt="Barcode" t-if="len(doc.code) == 13" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;quiet=%s' % ('EAN13', doc.code, 150,40,0)" style="width:150px;height:40px;"/>
                            <img alt="Barcode" t-elif="len(doc.code) == 8" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;quiet=%s' % ('EAN8', doc.code, 150,40,0)" style="width:150px;height:40px;"/>
                            <img alt="Barcode" t-else="" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;&amp;quiet=%s' % ('Code128', doc.code, 150,40,0)" style="width:150px;height:40px;"/>
                        </t>
                    </div>
                </div>
        </t>
    </template>

    <template id="patient_cardreport">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="acs_hms.patient_cardreport_document" t-lang="doc.partner_id.lang"/>
            </t>
        </t>
    </template>

    <record id="patient_card_report_id" model="ir.actions.report">
        <field name="name">Patient Card</field>
        <field name="model">hms.patient</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">acs_hms.patient_cardreport</field>
        <field name="report_file">acs_hms.patient_cardreport</field>
        <field name="print_report_name">(object.code or object.name).replace('/','_')</field>
        <field name="binding_model_id" ref="model_hms_patient"/>
        <field name="groups_id" eval="[(4, ref('acs_hms.group_hms_receptionist'))]"/>
        <field name="binding_type">report</field>
    </record>

</odoo>