<?xml version="1.0"?>
<odoo>

    <!-- Laboratory -->
    <record id="view_acs_laboratory_tree" model="ir.ui.view">
        <field name="name">acs.laboratory.tree</field>
        <field name="model">acs.laboratory</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="partner_id"/>
                <field name="description"/>
                <field name="is_collection_center"/>
                <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
            </tree>
        </field>
    </record>

    <record id="view_acs_laboratory_form" model="ir.ui.view">
        <field name="name">acs.laboratory.form</field>
        <field name="model">acs.laboratory</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <field name="name" required="1"/>
                        <field name="partner_id" readonly="1" required="0"/>
                        <field name="is_collection_center"/>
                        <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                    </group>
                    <group>
                        <field name="description"/>
                    </group>
                    <separator string="Equipe"/>
                    <group>
                        <field name="group_medlab" widget="many2many_tags"/>
                        <field name="group_techlab" widget="many2many_tags"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_acs_laboratory" model="ir.actions.act_window">
        <field name="name">Laboratory</field>
        <field name="res_model">acs.laboratory</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_collection_center','=',False)]</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Click to add a new Laboratory.
            </p>
        </field>
    </record>

    <record id="action_acs_collection_center" model="ir.actions.act_window">
        <field name="name">Collection Center</field>
        <field name="res_model">acs.laboratory</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_collection_center','=',True)]</field>
        <field name="context">{'default_is_collection_center':True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Click to add a new Collection Center.
            </p>
        </field>
    </record>

    <!--LAB TEST CRITEAREA-->
    <record id="view_lab_test_critearea_form" model="ir.ui.view">
        <field name="name">lab.test.critearea</field>
        <field name="model">lab.test.critearea</field>
        <field name="arch" type="xml">
            <form string="Lab Test Criteria">
                <sheet>
                    <group>
                        <group>
                            <field name="code"/>
                            <field name="sequence"/>
                            <field name="sample_type_id"/>
                            <field name="result_value_type"/>

                        </group>
                        <group>
                            <field name="display_type"/>
                            <field name="name" widget="section_and_note_text"/>
                            <field name="normal_range_male"/>
                            <field name="normal_range_female"/>
                            <field name="lab_uom_id"/>
                        </group>
                    </group>
                    <group string="Notice d'utilisation">
                        <p style="color: #ffffff; background-color: #FF0000">
                            Utilisez le spératateur "<b> % </b>" pour définir un intervalle<br/>
                            Exemple:<br/>
                            Soit Valeur de référence = 30%60%80 <br/>
                            Alors les valeurs de références seront :<br/>
                            &lt;30 pour Interprétation résultat basse,<br/>
                            30-60 pour Interpretation résultat intervalle 1,<br/>
                            60-80 pour Interpretation résultat intervalle 2,<br/>
                            &gt;80 pour interpréation résultat élevé<br/><br/>
                            Pour autres types de valeurs de référence, utilisé Interprétation résultat normal et anormal<br/><br/>

                            <b><u>Remarque:</u></b> Ajoutez une " * " pour les interprétations à risque
                        </p>

                    </group>
                    <group>
                        <group string="Valeur de référence spécifique">
                            <field name="reference_spec_male" placeholder="X%Y%Z"/>
                            <field name="reference_spec_female" placeholder="X%Y%Z"/>
                        </group>
                        <group string="Interprétation">
                            <field name="interp_si_normal"/>
                            <field name="interp_not_normal"/>
                            <field name="interp_si_low"/>
                            <field name="interp_range_1"/>
                            <field name="interp_range_2"/>
                            <field name="interp_si_high"/>

                        </group>
                    </group>
                    <group>
                        <group string="Recommandation">
                            <field name="advice_low"/>
                            <field name="advice_high"/>
                        </group>
                    </group>
                    <group string="Valeur de référence par tranche d'âge">
                        <field name="reference_per_age"/>
                        <field name="usual_reference_line" nolabel="1" colspan="4" widget="section_and_note_one2many">
                            <tree string="Lignes" editable="bottom">
                                <control>
                                    <create name="add_line_control" string="Add a line"/>
                                </control>
                                <field name="range_age"/>
                                <field name="age_unite"/>
                                <field name="normal_range_male"/>
                                <field name="normal_range_female"/>
                                <field name="reference_spec_male"/>
                                <field name="reference_spec_female"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_lab_test_critearea_tree" model="ir.ui.view">
            <field name="name">lab.test.critearea.tree</field>
            <field name="model">lab.test.critearea</field>
            <field name="arch" type="xml">
            <tree string="Lab Test Criteria">
                <field name="sequence"/>
                <field name="display_type"/>
                <field name="name"/>
                <field name="normal_range_male"/>
                <field name="normal_range_female"/>
                <field name="lab_uom_id"/>
                <field name="result_value_type"/>
            </tree>
        </field>
    </record>

    <!-- Lab Test type -->
    <record model="ir.ui.view" id="hms_test_view">
        <field name="name">Laboratory Test</field>
        <field name="model">acs.lab.test</field>
        <field name="arch" type="xml">
            <form string="Lab Tests">
                <sheet>
                    <group>
                        <group>
                            <field name="name" required="1"/>
                            <field name="product_id" domain="[('type','=','service'), ('hospital_product_type', 'in', ['pathology', 'radiology'])]" context="{'default_type': 'service', 'default_hospital_product_type': 'pathology'}"/>
                            <field name="acs_tat"/>
                            <field name="sample_type_id"/>
                        </group>
                        <group>
                            <field name="code"/>
                            <field name="test_type"/>
                            <field name="result_value_type"/>
                            <field name="company_id" groups="base.group_multi_company" options="{'no_create': True}"/>
                            <field name="cat_analyse"/>
                        </group>
                    </group>

                    <notebook>
                        <page name="diagnosis" string="Diagnosis">
                            <field name="critearea_ids"  nolabel="1" colspan="4"/>
<!--                            <field name="critearea_ids" colspan="4" nolabel="1" widget="section_and_note_one2many" context="{'default_result_value_type': result_value_type}">-->
<!--                                <tree editable="top" string="Test Cases">-->
<!--                                    &lt;!&ndash;control>-->
<!--                                        <create string="Add a line"/>-->
<!--                                        <create string="Add a section" context="{'default_display_type': 'line_section'}"/>-->
<!--                                    </control&ndash;&gt;-->
<!--                                    <control>-->
<!--                                        <create name="add_line_control" string="Add a line"/>-->
<!--                                        <create name="add_section_control" string="Add a section" context="{'default_display_type': 'line_section'}"/>-->
<!--                                        <create name="add_note_control" string="Add a note" context="{'default_display_type': 'line_note'}"/>-->
<!--                                    </control>-->
<!--                                    <field name="sequence" widget="handle"/> -->
<!--                                    <field name="display_type" invisible="1"/>-->
<!--                                    <field name="name" required="1" widget="section_and_note_text"/>-->
<!--                                    <field name="code"/>-->
<!--                                    <field name="normal_range_male" attrs="{ 'required': [('display_type', '=', False)]}"/>-->
<!--                                    <field name="normal_range_female" attrs="{ 'required': [('display_type', '=', False)]}"/>-->
<!--                                    <field name="lab_uom_id"/>-->
<!--                                    <field name="result_value_type"/>-->
<!--                                    <field name="sample_type_id" force_save="1"/>-->
<!--                                    <field name="remark"/>-->
<!--                                    <separator string="Valeur de référence" colspan="4"/>-->
<!--                                    <field name="usual_reference_line"  nolabel="1" colspan="4"/>-->
<!--                                </tree>-->
<!--                            </field>-->
                        </page>
                        <page name="consumable_lines" string="Consumed Material">
                            <field name="consumable_line_ids" nolabel="1" colspan="4">
                                <tree string="Line" editable="top">
                                    <field name="product_id" expand="1" required="1" domain="[('tracking','=','none')]"/>
                                    <field name="product_uom" required="1"/>
                                    <field name="qty" required="1"/>
                                    <field name="date" required="1"/>
                                    <field name="move_id" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <field name="description" placeholder="Description"/>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="hms_test_tree">
        <field name="name">Lab Tests</field>
        <field name="model">acs.lab.test</field>
        <field name="arch" type="xml">
            <tree string="Lab test type">
                <field name="name"></field>
                <field name="code"></field>
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="hms_action_form_test">
        <field name="name">Lab Tests</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">acs.lab.test</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                No Record Found
            </p>
            <p>
                Click to add new Lab Test.
            </p>
        </field>
    </record>

</odoo>