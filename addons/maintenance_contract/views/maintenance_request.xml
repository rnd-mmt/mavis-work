<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <record id="maintenance_request_form_inherit" model="ir.ui.view">
            <field name="name">maintenance.request.form</field>
            <field name="model">maintenance.request</field>
            <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
            <field name="arch" type="xml">
<!--            <xpath expr="//div[@name='button_box']/button[1]" position="before">-->
<!--                <button name="show_related_task" type="object" class="btn oe_stat_button" icon="fa-handshake-o" style="min-width: 240px;" title="Contrat de maintenance">-->
<!--                    <div class="o_stat_info">-->
<!--                        <div style="display: flex; justify-content: center; align-items: center;">-->
<!--                            <field name="down_time"/>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </button>-->
<!--            </xpath>-->
                <xpath expr="//field[@name='equipment_id']" position="after">
                    <field name="down_time" string="Durée des interventions (en heure)"/>
                    <field name="total_duration" invisible="1"/>
                    <field name="percentage_downtime" widget="percentpie" string="Downtime" invisible="1"/>
                    <field name="percentage_uptime" widget="percentpie" string="Uptime" invisible="1"/>                    
                </xpath>

                <xpath expr="//sheet" position="inside">
                    <field name="contract_expired" invisible="1"/>
                    <widget name="web_ribbon" title="Contrat expiré" bg_color="bg-danger" attrs="{'invisible': [('contract_expired', '=', False)]}"/>
                    <widget name="web_ribbon" title="Contrat en cours" bg_color="bg-success" attrs="{'invisible': [('contract_expired', '=', True)]}"/>
                </xpath>

            </field>
        </record>
    </data>
</odoo>
