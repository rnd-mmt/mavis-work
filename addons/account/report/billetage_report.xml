<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="report_cashbox_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="account.report_cashbox_template_document" />
                </t>
            </t>
            
        </template>
        <template id="report_cashbox_template_document"> 
            <t t-call="web.basic_layout">
                <div class="header" style="width:100%; !important; display: block !important;">
                    <t t-if="doc.company_id_start" t-set="company_id" t-value="doc.company_id_start"/>
                    <t t-if="doc.company_id_end" t-set="company_id" t-value="doc.company_id_end"/>
                    <div class="row" style="display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;display: flex;-webkit-box-align: center;-moz-box-align: center;-ms-flex-align: center;-webkit-align-items: center;align-items: center; -webkit-box-pack: space-between !important;-moz-box-pack: space-between !important;-ms-flex-pack: space-between !important;-webkit-justify-content: space-between !important;justify-content: space-between !important;">
                        <div class="col-6">
                            <div class="row" style="display: -webkit-box;display: -moz-box;display: -ms-flexbox;display: -webkit-flex;display: flex;-webkit-box-align: center;-moz-box-align: center;-ms-flex-align: center;-webkit-align-items: center;align-items: center; ">
                                <div class="col-3">
                                    <img t-if="company_id.logo" t-att-src="image_data_uri(company_id.logo)" alt="Logo" width="70px" height="75px"/>
                                </div>
                                <div class="col-9">
                                    <div style="display: block; position: relative; max-width: 200px; padding-left: 5px;">
                                        <p style="text-align: center;"><span t-esc="company_id.name"/></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <ul class="list-unstyled">
                            <strong><li t-if="company_id.name"><span t-field="company_id.name"/></li></strong>
                            <li t-if="company_id.street"><span class="company_address" t-field="company_id.street"/> - <span class="company_country" t-field="company_id.country_id.name"/></li>
                            <li t-if="company_id.phone">Tel: <span class="o_force_ltr" t-field="company_id.phone"/></li>
                            <li t-if="company_id.email"><span t-field="company_id.email"/></li>
                            <li t-if="company_id.website"><span t-field="company_id.website"/></li>
                        </ul>
                        </div>
                    </div>
                </div>
                <div class="page">
                    <t t-if='doc.end_bank_stmt_ids'>
                        <h3 class="text-center" style="font-weight:bold !important; font-family:Arial !important;">Billetage solde initiale</h3>
                    </t>
                    <t t-else="">
                        <h3 class="text-center" style="font-weight:bold !important; font-family:Arial !important;">Billetage solde finale</h3>
                    </t>

                    <div class="col-auto col-3 mw-100 mb-2" >
                        <strong>
                            <t t-if="doc.title_start" t-esc="doc.title_start"/> 
                            <t t-if="doc.title_end" t-esc="doc.title_end"/> 
                        </strong>
                    </div>
                    <div class="col-auto col-3 mw-100 mb-2">
                        <strong>Date:</strong>
                        <span class="m-0" t-if="doc.date_start" t-field="doc.date_start"/>
                        <span class="m-0" t-if="doc.date_end" t-field="doc.date_end"/>
                    </div>

                    <style>
                        table {
                                width: 100% !important;
                                border: solid 1px gray !important;
                                margin-top: 30px !important;
                                }
                                thead {
                                background-color: #f2f2f2 !important;
                                color: #333 !important;
                                }
                                th {
                                border: 1px solid #ddd !important;
                                font-size: 16px !important;
                                font-weight: bold !important;
                                text-align: center !important;
                                }
                                td {
                                border: 1px solid #ddd !important;
                                text-align: center !important;
                                }
                    </style>     
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <th style="font-weight:bold !important; font-family:Arial !important;">Nombre de Pièces/Billets</th>
                                    <th style="font-weight:bold !important; font-family:Arial !important;">Valeur de la Pièces/Billet </th>
                                    <th style="font-weight:bold !important; font-family:Arial !important;"> Sous Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="doc.cashbox_lines_ids" t-as="line">
                                    <tr>
                                        <td><t t-esc="line.number"/></td>
                                        <td><t t-esc="line.coin_value" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                        <td style="text-align: right !important;" ><t t-esc="line.subtotal" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/></td>
                                    
                                    </tr>
                                </t>
                            </tbody>
                        </table>


                        <div class="clearfix">
                            <div id="total" class="row">
                                <div t-attf-class="#{'col-6 col-sm-7 col-md-6'} ml-auto">
                                    <table class="table table-sm" style="page-break-inside: avoid;">
                                        
                                        <tr  style="background-color: #f2f2f2 !important; color: #333 !important;">
                                            <td style="font-weight:bold !important; font-family:Arial !important;">Total</td>
                                            <td class="text-right">
                                                <span t-field="doc.total" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="signature float-right" style="margin-top:40px !important;">
                            <span >
                                Signature:
                            </span>
                        </div>
                </div>
            </t>
    </template>
    <record id="action_report_bank_statement_cashbox" model="ir.actions.report">
        <field name="name">Billetage caisse</field>
        <field name="model">account.bank.statement.cashbox</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">account.report_cashbox_template</field>
        <field name="report_file">account.report_cashbox_template</field>
        <field name="print_report_name">'_CashboxReport'</field>
        <field name="binding_model_id" ref="model_account_bank_statement_cashbox"/>
        <field name="binding_type">report</field>
    </record>

    </data>

</odoo>