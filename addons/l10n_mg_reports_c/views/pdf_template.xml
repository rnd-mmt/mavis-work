<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <template id="report_active_balance_sheet" name="Active Balance Sheet custom font"
              inherit_id="accounting_pdf_reports.report_financial">
      <xpath expr="//t[@t-call='web.internal_layout']" position="attributes">
        <attribute name="t-call">web.external_layout</attribute>
      </xpath>
      <xpath expr="//div[@class='page']/h2" position="before">
      </xpath>
      <!--      data['debit_credit'] == 1"-->
      <xpath expr="//div[@class='page']//table[1]//thead" position="replace">
        <thead>
          <tr>
            <th style="width:45%;">Name</th>
            <th class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">Débit</th>
            <th class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">Crédit</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet'">Balance</th>
          </tr>
        </thead>
      </xpath>
      <xpath expr="//div[@class='page']//table[1]//tbody//tr" position="replace">
        <tr t-foreach="get_account_lines" t-as="a">
          <t t-if="a['level'] != 0">
            <t t-if="int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: normal;'"/></t>
            <t t-if="not int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: bold;'"/></t>
            <td>
              <span style="color: white;" t-esc="'..' * int(a.get('level', 0))"/>
              <span t-att-style="style" t-esc="a.get('name')"/>
            </td>
            <td class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">
              <t t-if="a.get('debit') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('debit'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('debit') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">
              <t t-if="a.get('credit') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('credit'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('credit') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet' ">
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style"
                    t-esc="abs(a.get('balance'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">)</t>
            </td>
          </t>
        </tr>
      </xpath>
      <!--      data['debit_credit'] != 1"-->
      <xpath expr="//div[@class='page']//table[2]//thead" position="replace">
        <thead>
          <tr>
            <th style="width:45%;">Name</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">Brut</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">Amorti</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">Net</th>
            <th class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">Débit</th>
            <th class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">Crédit</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet'">Balance</th>
          </tr>
        </thead>
      </xpath>
      <xpath expr="//div[@class='page']//table[2]//tbody//tr" position="replace">
        <tr t-foreach="get_account_lines" t-as="a">
          <t t-if="a['level'] != 0">
            <t t-if="int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: normal;'"/></t>
            <t t-if="not int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: bold;'"/></t>
            <td>
              <span style="color: white;" t-esc="'..' * int(a.get('level', 0))"/>
              <span t-att-style="style" t-esc="a.get('name')"/>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">
              <t t-if="a.get('brut') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('brut'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>
              <t t-if="a.get('brut') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">
              <t t-if="a.get('amorti') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('amorti'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('amorti') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">
              <t t-if="a.get('net') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('net'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('net') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">
              <t t-if="a.get('debit') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('debit'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('debit') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right"
                t-if="data['type_financial_report_mg'] != 'balance_sheet' and data['debit_credit'] == 1">
              <t t-if="a.get('credit') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style" t-esc="abs(a.get('credit'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('credit') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet' ">
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style"
                    t-esc="abs(a.get('balance'))" t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">)</t>
            </td>
          </t>
        </tr>
      </xpath>
      <!--      comparaison-->
      <xpath expr="//div[@class='page']//table[3]//thead" position="replace">
        <thead>
          <tr>
            <th style="width:45%;">Name</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet'">Balance</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet'"><span
                t-esc="data['label_filter']"/></th>
            <th class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'">Net</th>
            <th class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet'"><span
                t-esc="data['label_filter']"/></th>
          </tr>
        </thead>
      </xpath>
      <xpath expr="//div[@class='page']//table[3]//tbody//tr" position="replace">
        <tr t-foreach="get_account_lines" t-as="a">
          <t t-if="a['level'] != 0">
            <t t-if="int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: normal;'"/></t>
            <t t-if="not int(a.get('level')) &gt; 3"><t t-set="style" t-value="'font-weight: bold;'"/></t>
            <td>
              <span style="color: white;" t-esc="'..' * int(a.get('level', 0))"/>
              <span t-att-style="style" t-esc="a.get('name')"/>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] != 'balance_sheet' ">
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style"
                    t-esc="abs(a.get('balance'))"
                    t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('balance') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right" t-if="data['type_financial_report_mg'] == 'balance_sheet' ">
              <t t-if="a.get('net') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style"
                    t-esc="abs(a.get('net'))"
                    t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('net') &lt; 0 and not a.get('hidden')">)</t>
            </td>
            <td class="text-right">
              <t t-if="a.get('balance_cmp') &lt; 0 and not a.get('hidden')">(</t>
              <span t-att-style="style"
                    t-esc="abs(a.get('balance_cmp'))"
                    t-if="not a.get('hidden')"
                    t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
              <t t-if="a.get('balance_cmp') &lt; 0 and not a.get('hidden')">)</t>
            </td>
          </t>
        </tr>
      </xpath>
    </template>
    <record id="accounting_pdf_reports.action_report_financial" model="ir.actions.report">
      <field name="paperformat_id" ref="l10n_mg_reports_c.paperformat_choco_landscape"/>
    </record>
  </data>
</odoo>